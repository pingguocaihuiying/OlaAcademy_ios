<!--
	作者：forevertxp@gmail.com
	时间：2016-07-14
	描述：布置作业已选择题目编辑页面
-->
<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({ messageStyle: "none", tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} });
		</script>

		<script type="text/javascript" src="../MathJax.js?config=TeX-AMS_HTML-full"></script>

		<script type="text/javascript" src="../jquery.js"></script>

		<style type='text/css'>
			.optionLine {
				border-bottom: 5px solid #f0f0f0;
				padding: 10px 2px;
				font-size: 16px;
				line-height: 30px;
			}
			
		</style>

		<script type="text/javascript">
            
            // js与ios交互
            function setupWebViewJavascriptBridge(callback) {
                if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }
                if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
                window.WVJBCallbacks = [callback];
                var WVJBIframe = document.createElement('iframe');
                WVJBIframe.style.display = 'none';
                WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
                document.documentElement.appendChild(WVJBIframe);
                setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
            }
        
            setupWebViewJavascriptBridge(function(bridge) {
                                     
                                     bridge.registerHandler('javascriptHandler', function(data, responseCallback) {
                                                            loadQuestion(data)
                                                            // 成功后返回
                                                            var responseData = { 'Javascript Says':'Success!' }
                                                            responseCallback(responseData)
                                                            })
                                         
                                })
            // 加载数据
			function loadQuestion(data) {
                var obj = eval ("(" + JSON.stringify(data) + ")");
                var html = "<table style='width: 100%; border: 0px'>";
                for(var i=0;i<obj.count;i++){
                    var question = data["question"+i];
                    if(question.title != "") {
                        html +="<tr><td align='left'><div>"+ (i+1)+"、"+question.title +"</div></td><td align='right'><img src='icon_delete.png' height='20' size='20'  onclick='del("+i+")'/></td></tr><tr><td colspan='2'><hr color='#f0f0f0' size='2' width='100%' /></td></tr>";
                    }
                }
                html += "</table>"
                updateMath(html);
            }

			function updateMath(html) {
				var questionDIV = document.getElementById("question");
				questionDIV.innerHTML = html;
				MathJax.Hub.Queue(["Typeset", MathJax.Hub, questionDIV]);
			}
        
            function del(index){
                WebViewJavascriptBridge.callHandler('mathObjcCallback', {'questionIndex': index}, function(response) {
                })

            }
			
		</script>
	</head>

	<body>
		<div id='question'></div>
	</body>

</html>
